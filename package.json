{
  "workspaces": [
    "frontend/**"
  ],
  "scripts": {
    "rust:fmt": "cargo +nightly fmt --all",
    "rust:fmt:check": "cargo +nightly fmt --all --check",
    "db:shell": "source .env && psql -d $DATABASE_URL",
    "db:migrate": "bun run --cwd ./crates/pump diesel migration run",
    "db:revert": "bun run --cwd ./crates/pump diesel migration revert",
    "db:clear": "bun run --cwd ./crates/pump diesel migration revert --all",
    "db:reset": "bun db:clear && bun db:migrate",
    "server:dev": "cargo run --bin server",
    "listener:dev": "cargo run --bin listener",
    "anvil:new": "rimraf ~/.anvil/state.json && mkdir -p ~/.anvil && sanvil --state ~/.anvil",
    "anvil:state": "mkdir -p ~/.anvil && sanvil --state ~/.anvil",
    "web:dev": "bun run contract:abis:copy && bun run --cwd ./frontend/web dev",
    "web:build": "bun run contract:abis:copy && bun run --cwd ./frontend/web build",
    "web:lint": "bun run --cwd ./frontend/web lint",
    "web:preview": "bun run --cwd ./frontend/web preview",
    "contract:clean": "bun run --cwd ./contracts sforge clean && bun run --cwd ./contracts rimraf broadcast/ cache/ out/",
    "contract:deploy": "source .env && VITE_CHAIN_ID=$VITE_CHAIN_ID bun contract:dev && DEPLOYER_PRIVATE_KEY=$DEPLOYER_PRIVATE_KEY bun run --cwd ./contracts sforge script script/PumpRand.s.sol --rpc-url $RPC_URL --broadcast && VITE_CHAIN_ID=$VITE_CHAIN_ID bun contract:addresses",
    "contract:dev": "bun contract:build && bun contract:iabis && bun contract:abis",
    "contract:build": "bun run --cwd ./contracts sforge build",
    "contract:abis:copy": "source .env && mkdir -p ./frontend/web/src/abis && cp -r ./contracts/abis/$VITE_CHAIN_ID/* ./frontend/web/src/abis",
    "contract:abis": "CONTRACT=PumpRand bun contract:abi && CONTRACT=WETH9 bun contract:abi && CONTRACT=UniswapV2Factory bun contract:abi && CONTRACT=UniswapV2Router02 bun contract:abi",
    "contract:iabis": "CONTRACT=ISRC20 bun contract:iabi && CONTRACT=UniswapV2ERC20 bun contract:iabi && CONTRACT=UniswapV2Pair bun contract:iabi && CONTRACT=IPumpCoin bun contract:iabi",
    "contract:abi": "mkdir -p ./contracts/abis/$VITE_CHAIN_ID/contracts && jq --argjson chainId $VITE_CHAIN_ID '{chainId: $chainId, methodIdentifiers: .methodIdentifiers, abi: .abi}' ./contracts/out/$CONTRACT.sol/$CONTRACT.json > ./contracts/abis/$VITE_CHAIN_ID/contracts/$CONTRACT.json",
    "contract:iabi": "mkdir -p ./contracts/abis/$VITE_CHAIN_ID/interfaces && jq --argjson chainId $VITE_CHAIN_ID '{chainId: $chainId, methodIdentifiers: .methodIdentifiers, abi: .abi}' ./contracts/out/$CONTRACT.sol/$CONTRACT.json > ./contracts/abis/$VITE_CHAIN_ID/interfaces/$CONTRACT.json",
    "contract:addresses": "bun contract:address:pump && bun contract:address:weth && bun contract:address:factory && bun contract:address:router",
    "contract:address:pump": "CONTRACT=PumpRand BROADCAST=PumpRand RECEIPT=3 bun contract:address",
    "contract:address:weth": "CONTRACT=WETH9 BROADCAST=PumpRand RECEIPT=0 bun contract:address",
    "contract:address:factory": "CONTRACT=UniswapV2Factory BROADCAST=PumpRand RECEIPT=1 bun contract:address",
    "contract:address:router": "CONTRACT=UniswapV2Router02 BROADCAST=PumpRand RECEIPT=2 bun contract:address",
    "contract:address": "jq --arg receipt \"$RECEIPT\" -s '{\"address\": .[0].receipts[($receipt | tonumber)].contractAddress} * .[1]' ./contracts/broadcast/$BROADCAST.s.sol/$VITE_CHAIN_ID/run-latest.json ./contracts/abis/$VITE_CHAIN_ID/contracts/$CONTRACT.json > temp.json && mv temp.json ./contracts/abis/$VITE_CHAIN_ID/contracts/$CONTRACT.json"
  },
  "devDependencies": {
    "@trivago/prettier-plugin-sort-imports": "^5.2.2",
    "prettier": "^3.4.2",
    "rimraf": "^6.0.1",
    "vite-tsconfig-paths": "^5.1.4"
  },
  "dependencies": {}
}